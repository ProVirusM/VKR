import{v as i,b5 as V,b6 as c,o as b,a$ as x,b0 as o,b1 as g,b as a,aY as n,b7 as v,b4 as u,a_ as k}from"./index-WY92rlIk.js";import{a as w,V as y}from"./VCard-C8tOARdq.js";import{V as _}from"./VForm-BQlAH02v.js";import{e as d}from"./VTextField-CZimbdcu.js";const T={__name:"LoginView",setup(S){const l=i(""),s=i(""),m=V(),p=c(),f=async()=>{try{const t=await k.post("/api/login_check",{email:l.value,password:s.value}),e=t.data.token;localStorage.setItem("token",t.data.token),localStorage.setItem("name",t.data.name),localStorage.setItem("email",t.data.email),p.login(e),m.push("/dashboard")}catch{alert("Ошибка входа. Проверьте данные.")}};return(t,e)=>(b(),x(g,{class:"d-flex align-center justify-center fill-height"},{default:o(()=>[a(y,{class:"pa-6","max-width":"400",elevation:"12"},{default:o(()=>[a(w,{class:"text-h5 text-center mb-4"},{default:o(()=>e[2]||(e[2]=[n("Вход в систему")])),_:1}),a(_,{onSubmit:v(f,["prevent"])},{default:o(()=>[a(d,{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=r=>l.value=r),label:"Имя пользователя",required:""},null,8,["modelValue"]),a(d,{modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=r=>s.value=r),label:"Пароль",type:"password",required:""},null,8,["modelValue"]),a(u,{type:"submit",color:"primary",class:"mt-4",block:""},{default:o(()=>e[3]||(e[3]=[n("Войти")])),_:1}),a(u,{variant:"text",class:"mt-2",block:"",to:"/register"},{default:o(()=>e[4]||(e[4]=[n("Регистрация")])),_:1})]),_:1})]),_:1})]),_:1}))}};export{T as default};
