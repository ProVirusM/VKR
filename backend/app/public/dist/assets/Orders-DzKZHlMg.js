import{_ as U,r as o,b as q,d as p,w as V,e as _,o as d,f as l,g as s,V as r,h as B,i as k,j as b,c as C,k as D,F as $,l as h,m as z,n as A,p as g,t as c,q as j,a as v,s as F,u as E,v as G,x as I,y as M,z as R}from"./index-DQJToVhp.js";const H={class:"text-subtitle-2 text-error"},J={class:"text-caption text-right text-grey mt-2"},K={key:0,class:"text-center"},P={__name:"Orders",setup(Q){const w=o([]),S=o([]),x=o([]),u=o(null),i=o(null),n=o(null),y=o([]);q(()=>{L(),f()});const L=async()=>{const e=await p.get("/api/directions");w.value=e.data};V(u,async e=>{e&&(await N(),i.value=null,n.value=null,x.value=[],f())});const N=async()=>{try{const e=await p.get(`/api/languages/${u.value}`),a=Array.from(new Set(e.data.map(t=>t.title))).map(t=>e.data.find(m=>m.title===t));S.value=a}catch(e){console.error("Ошибка при загрузке языков:",e)}};V(i,async e=>{e&&(await O(),n.value=null,f())});const O=async()=>{if(!i.value||!u.value)return;const e=await p.get(`/api/stacks/${i.value}/${u.value}`);x.value=e.data};V(n,()=>{f()});const f=async()=>{const e={};u.value&&(e.direction=u.value),i.value&&(e.language=i.value),n.value&&(e.stacks=n.value);try{const a=await p.get("/api/orders",{params:e});y.value=a.data}catch(a){console.error("Ошибка при фильтрации заказов:",a)}},T=e=>{console.log(`Перейти к деталям заказа: ${e}`)};return(e,a)=>(d(),_(z,{fluid:"",class:"py-10"},{default:l(()=>[s(k,{justify:"center"},{default:l(()=>[s(r,{cols:"12",md:"8"},{default:l(()=>[s(B,{class:"mb-6 pa-4",elevation:"2"},{default:l(()=>[s(k,null,{default:l(()=>[s(r,{cols:"12",sm:"4"},{default:l(()=>[s(b,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=t=>u.value=t),items:w.value,"item-text":"title","item-value":"id",label:"Выберите направление",outlined:"",dense:""},null,8,["modelValue","items"])]),_:1}),s(r,{cols:"12",sm:"4"},{default:l(()=>[s(b,{modelValue:i.value,"onUpdate:modelValue":a[1]||(a[1]=t=>i.value=t),items:S.value,"item-text":"title","item-value":"id",label:"Выберите язык",disabled:!u.value,outlined:"",dense:""},null,8,["modelValue","items","disabled"])]),_:1}),s(r,{cols:"12",sm:"4"},{default:l(()=>[s(b,{modelValue:n.value,"onUpdate:modelValue":a[2]||(a[2]=t=>n.value=t),items:x.value,"item-text":"title","item-value":"id",label:"Выберите технологию",disabled:!i.value,outlined:"",dense:""},null,8,["modelValue","items","disabled"])]),_:1})]),_:1})]),_:1}),(d(!0),C($,null,D(y.value,t=>(d(),_(B,{key:t.id,class:"mb-4 pa-6",elevation:"10",rounded:"xl"},{default:l(()=>[s(A,{class:"text-h5 text-primary"},{default:l(()=>[g(c(t.ord_title),1)]),_:2},1024),s(j,{class:"text-body-1 text-grey-darken-2"},{default:l(()=>[g(c(t.ord_text),1)]),_:2},1024),t.ord_stacks&&t.ord_stacks.length?(d(),_(j,{key:0},{default:l(()=>[a[3]||(a[3]=v("div",{class:"text-subtitle-2 mb-2"},"Технологии:",-1)),s(F,null,{default:l(()=>[(d(!0),C($,null,D(t.ord_stacks,m=>(d(),_(E,{key:m.id,color:"primary",variant:"outlined",class:"ma-1"},{default:l(()=>[g(c(m.title),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)):h("",!0),s(G,{class:"my-4"}),s(k,{justify:"space-between"},{default:l(()=>[s(r,{cols:"6"},{default:l(()=>[a[4]||(a[4]=v("div",{class:"text-caption text-grey"},"Статус:",-1)),v("div",{class:I([e.getStatusClass(t.ord_status),"text-subtitle-2"])},c(t.ord_status),3)]),_:2},1024),s(r,{cols:"6",class:"text-right"},{default:l(()=>[a[5]||(a[5]=v("div",{class:"text-caption text-grey"},"Цена:",-1)),v("div",H,c(t.ord_price)+" ₽ ",1)]),_:2},1024)]),_:2},1024),v("div",J," Срок: "+c(t.ord_time),1),s(M,{class:"justify-end"},{default:l(()=>[s(R,{color:"primary",variant:"elevated",rounded:"",onClick:m=>T(t.id)},{default:l(()=>a[6]||(a[6]=[g(" Подробнее ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)),y.value.length?h("",!0):(d(),C("p",K,"Заказы не найдены."))]),_:1})]),_:1})]),_:1}))}},X=U(P,[["__scopeId","data-v-f6408e2d"]]);export{X as default};
