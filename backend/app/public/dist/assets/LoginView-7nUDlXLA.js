import{r as u,B as f,o as V,e as g,f as l,g as a,n as x,p as n,C as k,D as v,E as d,A as i,h as w,m as b,u as y,d as C}from"./index-DUB7O3Gq.js";const h={__name:"LoginView",setup(S){const o=u(""),s=u(""),m=y(),p=f(),c=async()=>{try{const t=await C.post("/api/login_check",{email:o.value,password:s.value}),e=t.data.token;localStorage.setItem("token",t.data.token),localStorage.setItem("name",t.data.name),localStorage.setItem("email",t.data.email),await p.login(e),m.push("/dashboard")}catch{alert("Ошибка входа. Проверьте данные.")}};return(t,e)=>(V(),g(b,{class:"d-flex align-center justify-center fill-height"},{default:l(()=>[a(w,{class:"pa-6","max-width":"400",elevation:"12"},{default:l(()=>[a(x,{class:"text-h5 text-center mb-4"},{default:l(()=>e[2]||(e[2]=[n("Вход в систему")])),_:1}),a(k,{onSubmit:v(c,["prevent"])},{default:l(()=>[a(d,{modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=r=>o.value=r),label:"Имя пользователя",required:""},null,8,["modelValue"]),a(d,{modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=r=>s.value=r),label:"Пароль",type:"password",required:""},null,8,["modelValue"]),a(i,{type:"submit",color:"primary",class:"mt-4",block:""},{default:l(()=>e[3]||(e[3]=[n("Войти")])),_:1}),a(i,{variant:"text",class:"mt-2",block:"",to:"/register"},{default:l(()=>e[4]||(e[4]=[n("Регистрация")])),_:1})]),_:1})]),_:1})]),_:1}))}};export{h as default};
