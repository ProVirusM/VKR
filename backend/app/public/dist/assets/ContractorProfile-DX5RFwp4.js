import{L as A,M as D,N as I,O as H,P as M,Q as U,R as E,S as L,T as O,g as a,U as G,_ as Q,r as $,b as W,e as b,f as e,k as j,d as q,o as u,V as g,l as h,i as x,D as J,a as s,t as r,H as z,n as d,m as F,W as R,I as y,p as S,c as p,j as C,F as w,u as K,G as X,A as Y,y as Z,E as ee,C as te,B as ae}from"./index-Bgo3qIgF.js";import{V as le}from"./VSnackbar-CYf3lI-V.js";const se=A({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,...D(),...I(),...H(),...M()},"VTable"),oe=U()({name:"VTable",props:se(),setup(m,T){let{slots:i,emit:c}=T;const{themeClasses:v}=E(m),{densityClasses:B}=L(m);return O(()=>a(m.tag,{class:["v-table",{"v-table--fixed-height":!!m.height,"v-table--fixed-header":m.fixedHeader,"v-table--fixed-footer":m.fixedFooter,"v-table--has-top":!!i.top,"v-table--has-bottom":!!i.bottom,"v-table--hover":m.hover},v.value,B.value,m.class],style:m.style},{default:()=>{var k,V,f;return[(k=i.top)==null?void 0:k.call(i),i.default?a("div",{class:"v-table__wrapper",style:{height:G(m.height)}},[a("table",null,[i.default()])]):(V=i.wrapper)==null?void 0:V.call(i),(f=i.bottom)==null?void 0:f.call(i)]}})),{}}}),re={class:"text-h3 white--text"},ne={class:"text-grey-darken-1"},ie={class:"d-flex align-center mb-4"},ue=["href"],de={key:1,class:"text-grey"},ce={class:"d-flex align-center mb-4"},me=["onClick"],fe={key:1,class:"text-grey"},ve={class:"d-flex align-center mb-4"},be={class:"font-weight-bold mb-1"},pe={class:"text-grey text-caption mt-1"},_e={key:1,class:"text-grey"},ge={__name:"ContractorProfile",setup(m){const T=X(),i=Y(),c=$(null),v=$({show:!1,text:"",color:"success"}),B=async()=>{try{const f=await q.get(`/api/contractors/${T.params.id}/full-profile`);c.value=f.data}catch{v.value={show:!0,text:"Ошибка загрузки профиля",color:"error"}}},k=f=>{i.push(`/projects/${f}`)},V=f=>{i.push(`/contractor/orders/${f}`)};return W(B),(f,l)=>(u(),b(j,{class:"py-10"},{default:e(()=>[a(x,{justify:"center"},{default:e(()=>[a(g,{cols:"12",md:"10",lg:"8"},{default:e(()=>[a(h,{class:"profile-card mb-8",elevation:"8"},{default:e(()=>[a(x,{"no-gutters":"",align:"center"},{default:e(()=>[a(g,{cols:"auto",class:"d-flex flex-column align-center px-8 py-8 profile-avatar-col"},{default:e(()=>[a(J,{size:"110",color:"primary",class:"mb-4 elevation-6"},{default:e(()=>{var o,n,t;return[s("span",re,r(((t=(n=(o=c.value)==null?void 0:o.user)==null?void 0:n.name)==null?void 0:t.charAt(0))||"?"),1)]}),_:1}),a(z,{color:"primary",class:"mt-2","prepend-icon":"mdi-account-badge"},{default:e(()=>l[3]||(l[3]=[d("Исполнитель")])),_:1})]),_:1}),a(g,null,{default:e(()=>[a(F,{class:"text-h4 font-weight-bold mb-2"},{default:e(()=>{var o,n,t,_,P,N;return[d(r((n=(o=c.value)==null?void 0:o.user)==null?void 0:n.surname)+" "+r((_=(t=c.value)==null?void 0:t.user)==null?void 0:_.name)+" "+r((N=(P=c.value)==null?void 0:P.user)==null?void 0:N.patronymic),1)]}),_:1}),a(R,{class:"mb-2"},{default:e(()=>{var o,n;return[a(y,{size:"20",color:"grey-darken-1",class:"mr-1"},{default:e(()=>l[4]||(l[4]=[d("mdi-email")])),_:1}),s("span",ne,r((n=(o=c.value)==null?void 0:o.user)==null?void 0:n.email),1)]}),_:1}),a(S,{class:"text-body-1 mt-2"},{default:e(()=>{var o;return[d(r(((o=c.value)==null?void 0:o.description)||"Нет описания"),1)]}),_:1})]),_:1})]),_:1})]),_:1}),a(h,{class:"mb-8 pa-6",elevation:"4"},{default:e(()=>{var o,n;return[s("div",ie,[a(y,{color:"indigo",class:"mr-2"},{default:e(()=>l[5]||(l[5]=[d("mdi-github")])),_:1}),l[6]||(l[6]=s("h3",{class:"text-h5 font-weight-bold mb-0"},"Проекты",-1))]),(n=(o=c.value)==null?void 0:o.projects)!=null&&n.length?(u(),b(x,{key:0,class:"project-list"},{default:e(()=>[(u(!0),p(w,null,C(c.value.projects,t=>(u(),b(g,{key:t.id,cols:"12",md:"6"},{default:e(()=>[a(h,{class:"mb-4 project-card",elevation:"2",onClick:_=>k(t.id),style:{cursor:"pointer"}},{default:e(()=>[a(F,{class:"font-weight-bold text-primary"},{default:e(()=>[d(r(t.name),1)]),_:2},1024),a(R,null,{default:e(()=>[a(y,{size:"18",color:"grey-darken-1",class:"mr-1"},{default:e(()=>l[7]||(l[7]=[d("mdi-link-variant")])),_:1}),s("a",{href:t.repository,target:"_blank",onClick:l[0]||(l[0]=Z(()=>{},["stop"]))},r(t.repository),9,ue)]),_:2},1024),a(S,null,{default:e(()=>[d(r(t.text),1)]),_:2},1024),t.photos&&t.photos.length?(u(),b(x,{key:0,class:"mt-2"},{default:e(()=>[(u(!0),p(w,null,C(t.photos,_=>(u(),b(g,{key:_.id,cols:"6"},{default:e(()=>[a(ee,{src:_.link,"aspect-ratio":"1",class:"rounded-lg",cover:""},null,8,["src"])]),_:2},1024))),128))]),_:2},1024)):te("",!0)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})):(u(),p("div",de,"Нет проектов"))]}),_:1}),a(h,{class:"mb-8 pa-6",elevation:"4"},{default:e(()=>{var o,n;return[s("div",ce,[a(y,{color:"teal-darken-2",class:"mr-2"},{default:e(()=>l[8]||(l[8]=[d("mdi-briefcase-outline")])),_:1}),l[9]||(l[9]=s("h3",{class:"text-h5 font-weight-bold mb-0"},"Заказы",-1))]),(n=(o=c.value)==null?void 0:o.orders)!=null&&n.length?(u(),b(oe,{key:0,class:"orders-table"},{default:e(()=>[l[10]||(l[10]=s("thead",null,[s("tr",null,[s("th",null,"Название"),s("th",null,"Статус"),s("th",null,"Цена"),s("th",null,"Срок"),s("th",null,"Статус участия")])],-1)),s("tbody",null,[(u(!0),p(w,null,C(c.value.orders,t=>(u(),p("tr",{key:t.id,onClick:_=>V(t.id),style:{cursor:"pointer"}},[s("td",null,r(t.title),1),s("td",null,[a(z,{color:t.status==="Завершен"?"success":t.status==="В работе"?"primary":"grey",size:"small"},{default:e(()=>[d(r(t.status),1)]),_:2},1032,["color"])]),s("td",null,r(t.price),1),s("td",null,r(t.time),1),s("td",null,r(t.order_contractor_status),1)],8,me))),128))])]),_:1})):(u(),p("div",fe,"Нет заказов"))]}),_:1}),a(h,{class:"pa-6",elevation:"4"},{default:e(()=>{var o,n;return[s("div",ve,[a(y,{color:"amber-darken-2",class:"mr-2"},{default:e(()=>l[11]||(l[11]=[d("mdi-star-outline")])),_:1}),l[12]||(l[12]=s("h3",{class:"text-h5 font-weight-bold mb-0"},"Отзывы",-1))]),(n=(o=c.value)==null?void 0:o.feedbacks)!=null&&n.length?(u(),b(x,{key:0},{default:e(()=>[(u(!0),p(w,null,C(c.value.feedbacks,t=>(u(),b(g,{key:t.id,cols:"12"},{default:e(()=>[a(ae,{type:t.estimation>=4?"success":t.estimation>=3?"warning":"error",class:"mb-2"},{default:e(()=>[s("div",be,[a(y,{left:"",size:"18",color:"amber"},{default:e(()=>l[13]||(l[13]=[d("mdi-star")])),_:1}),d(" Оценка: "+r(t.estimation),1)]),s("div",null,r(t.text),1),s("div",pe,r(t.timestamp),1)]),_:2},1032,["type"])]),_:2},1024))),128))]),_:1})):(u(),p("div",_e,"Нет отзывов"))]}),_:1})]),_:1})]),_:1}),a(le,{modelValue:v.value.show,"onUpdate:modelValue":l[2]||(l[2]=o=>v.value.show=o),color:v.value.color,timeout:3e3},{actions:e(()=>[a(K,{variant:"text",onClick:l[1]||(l[1]=o=>v.value.show=!1)},{default:e(()=>l[14]||(l[14]=[d("Закрыть")])),_:1})]),default:e(()=>[d(r(v.value.text)+" ",1)]),_:1},8,["modelValue","color"])]),_:1}))}},xe=Q(ge,[["__scopeId","data-v-9a721639"]]);export{xe as default};
