import{_ as B,r as v,b as N,e as x,f as t,k as z,E as A,d as V,o as c,g as a,V as u,a as i,q as y,i as f,c as C,F as S,j as T,l as _,H as j,n as r,u as g,t as d,A as R,J as D,C as E,m as F,p as O,G as P,s as U}from"./index-DejXQ6j1.js";import{V as q}from"./VSnackbar-Csf5_DjI.js";const G={key:0,class:"contractors-list"},H={class:"text-h4 white--text"},J={__name:"OrderContractors",setup(L){const m=v([]),b=R(),w=A().params.id,n=v(!1),l=v({show:!1,text:"",color:"success"}),p=(o,e="success")=>{l.value={show:!0,text:o,color:e}},h=async o=>{n.value=!0;const e=localStorage.getItem("token");try{await V.post(`/api/contractors/${o}/approve`,{},{headers:{Authorization:`Bearer ${e}`}}),p("Исполнитель успешно одобрен!"),await k()}catch(s){console.error("Ошибка при одобрении исполнителя",s),p("Не удалось одобрить исполнителя","error")}finally{n.value=!1}},I=o=>{b.push(`/contractor/${o}`)},k=async()=>{n.value=!0;const o=localStorage.getItem("token");try{const e=await V.get(`/api/orders/${w}/contractors`,{headers:{Authorization:`Bearer ${o}`}});m.value=e.data}catch(e){console.error("Ошибка при загрузке исполнителей",e),p("Не удалось загрузить список исполнителей","error")}finally{n.value=!1}};return N(()=>{k()}),(o,e)=>(c(),x(z,{class:"pa-8"},{default:t(()=>[a(f,{justify:"center",class:"mb-8"},{default:t(()=>[a(u,{cols:"12",class:"text-center"},{default:t(()=>[e[2]||(e[2]=i("h1",{class:"text-h3 font-weight-bold mb-2"}," Откликнувшиеся исполнители ",-1)),a(y,{class:"mx-auto",style:{"max-width":"200px"}})]),_:1})]),_:1}),m.value.length?(c(),C("div",G,[a(f,null,{default:t(()=>[(c(!0),C(S,null,T(m.value,s=>(c(),x(u,{key:s.contractorId,cols:"12",class:"mb-6"},{default:t(()=>[a(_,{class:"contractor-card h-100",elevation:"4",rounded:"xl",loading:n.value},{default:t(()=>[a(D,null,{prepend:t(()=>[a(E,{size:"80",class:"mr-4",color:"primary",elevation:"4"},{default:t(()=>[i("span",H,d(s.userName?s.userName.charAt(0).toUpperCase():""),1)]),_:2},1024)]),default:t(()=>[a(F,{class:"text-h5 font-weight-bold"},{default:t(()=>[r(d(s.userSurname)+" "+d(s.userName)+" "+d(s.userPatronymic),1)]),_:2},1024)]),_:2},1024),a(O,null,{default:t(()=>[a(P,{color:"primary",variant:"outlined",class:"mb-2","prepend-icon":"mdi-account-check"},{default:t(()=>e[3]||(e[3]=[r(" Исполнитель ")])),_:1})]),_:1}),a(y,{class:"mx-4"}),a(U,{class:"pa-4"},{default:t(()=>[a(f,null,{default:t(()=>[a(u,{cols:"12"},{default:t(()=>[a(g,{block:"",color:"success",size:"large",variant:"elevated",class:"mb-2","prepend-icon":"mdi-check-circle",onClick:$=>h(s.contractorId)},{default:t(()=>e[4]||(e[4]=[r(" Одобрить ")])),_:2},1032,["onClick"])]),_:2},1024),a(u,{cols:"12"},{default:t(()=>[a(g,{block:"",color:"primary",size:"large",variant:"outlined","prepend-icon":"mdi-account-circle",onClick:$=>I(s.contractorId)},{default:t(()=>e[5]||(e[5]=[r(" Профиль ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["loading"])]),_:2},1024))),128))]),_:1})])):(c(),x(f,{key:1,justify:"center",class:"mt-16"},{default:t(()=>[a(u,{cols:"12",md:"8",lg:"6",class:"text-center"},{default:t(()=>[a(_,{class:"pa-8",variant:"outlined"},{default:t(()=>[a(j,{size:"64",color:"grey",class:"mb-4"},{default:t(()=>e[6]||(e[6]=[r(" mdi-account-group-outline ")])),_:1}),e[7]||(e[7]=i("h2",{class:"text-h4 font-weight-bold mb-2 text-grey"}," Нет откликнувшихся исполнителей ",-1)),e[8]||(e[8]=i("p",{class:"text-body-1 text-grey"}," Пока никто не откликнулся на ваш заказ. Пожалуйста, подождите. ",-1))]),_:1})]),_:1})]),_:1})),a(q,{modelValue:l.value.show,"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.show=s),color:l.value.color,timeout:3e3},{actions:t(()=>[a(g,{variant:"text",onClick:e[0]||(e[0]=s=>l.value.show=!1)},{default:t(()=>e[9]||(e[9]=[r(" Закрыть ")])),_:1})]),default:t(()=>[r(d(l.value.text)+" ",1)]),_:1},8,["modelValue","color"])]),_:1}))}},W=B(J,[["__scopeId","data-v-56f3422c"]]);export{W as default};
