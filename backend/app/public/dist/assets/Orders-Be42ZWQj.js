import{_ as q,r as i,b as z,d as p,w as _,e as x,o,f as s,g as l,V as d,h as S,i as k,j as b,c as w,k as B,F as D,l as $,m as F,u as R,n as E,p as g,t as c,q as j,a as v,s as G,v as I,x as M,y as H,z as J,A as K}from"./index-DxBUXSDN.js";const P={class:"text-subtitle-2 text-error"},Q={class:"text-caption text-right text-grey mt-2"},W={key:0,class:"text-center"},X={__name:"Orders",setup(Y){const L=R(),C=i([]),h=i([]),y=i([]),u=i(null),n=i(null),r=i(null),V=i([]);z(()=>{N(),f()});const N=async()=>{try{const e=await p.get("/api/directions");C.value=e.data}catch(e){console.error("Ошибка при загрузке направлений:",e)}};_(u,async e=>{e&&(await O(),n.value=null,r.value=null,y.value=[],f())});const O=async()=>{try{const e=await p.get(`/api/languages/${u.value}`),a=Array.from(new Set(e.data.map(t=>t.title))).map(t=>e.data.find(m=>m.title===t));h.value=a}catch(e){console.error("Ошибка при загрузке языков:",e)}};_(n,async e=>{e&&(await A(),r.value=null,f())});const A=async()=>{if(!(!n.value||!u.value))try{const e=await p.get(`/api/stacks/${n.value}/${u.value}`);y.value=e.data}catch(e){console.error("Ошибка при загрузке технологий:",e)}};_(r,()=>{f()});const f=async()=>{const e={};u.value&&(e.direction=u.value),n.value&&(e.language=n.value),r.value&&(e.stacks=r.value);try{const a=await p.get("/api/orders",{params:e});V.value=a.data}catch(a){console.error("Ошибка при фильтрации заказов:",a)}},T=e=>{L.push(`/order/${e}`)},U=e=>{switch(e){case"В процессе":return"text-orange";case"Завершен":return"text-green";case"Отменен":return"text-red";default:return"text-grey"}};return(e,a)=>(o(),x(F,{fluid:"",class:"py-10"},{default:s(()=>[l(k,{justify:"center"},{default:s(()=>[l(d,{cols:"12",md:"8"},{default:s(()=>[l(S,{class:"mb-6 pa-4",elevation:"2"},{default:s(()=>[l(k,null,{default:s(()=>[l(d,{cols:"12",sm:"4"},{default:s(()=>[l(b,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=t=>u.value=t),items:C.value,"item-text":"title","item-value":"id",label:"Выберите направление",outlined:"",dense:""},null,8,["modelValue","items"])]),_:1}),l(d,{cols:"12",sm:"4"},{default:s(()=>[l(b,{modelValue:n.value,"onUpdate:modelValue":a[1]||(a[1]=t=>n.value=t),items:h.value,"item-text":"title","item-value":"id",label:"Выберите язык",disabled:!u.value,outlined:"",dense:""},null,8,["modelValue","items","disabled"])]),_:1}),l(d,{cols:"12",sm:"4"},{default:s(()=>[l(b,{modelValue:r.value,"onUpdate:modelValue":a[2]||(a[2]=t=>r.value=t),items:y.value,"item-text":"title","item-value":"id",label:"Выберите технологию",disabled:!n.value,outlined:"",dense:""},null,8,["modelValue","items","disabled"])]),_:1})]),_:1})]),_:1}),(o(!0),w(D,null,B(V.value,t=>(o(),x(S,{key:t.id,class:"mb-4 pa-6",elevation:"10",rounded:"xl"},{default:s(()=>[l(E,{class:"text-h5 text-primary"},{default:s(()=>[g(c(t.title),1)]),_:2},1024),l(j,{class:"text-body-1 text-grey-darken-2"},{default:s(()=>[g(c(t.text),1)]),_:2},1024),t.stacks&&t.stacks.length?(o(),x(j,{key:0},{default:s(()=>[a[3]||(a[3]=v("div",{class:"text-subtitle-2 mb-2"},"Технологии:",-1)),l(G,null,{default:s(()=>[(o(!0),w(D,null,B(t.stacks,m=>(o(),x(I,{key:m.id,color:"primary",variant:"outlined",class:"ma-1"},{default:s(()=>[g(c(m.title),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)):$("",!0),l(M,{class:"my-4"}),l(k,{justify:"space-between"},{default:s(()=>[l(d,{cols:"6"},{default:s(()=>[a[4]||(a[4]=v("div",{class:"text-caption text-grey"},"Статус:",-1)),v("div",{class:H([U(t.status),"text-subtitle-2"])},c(t.status),3)]),_:2},1024),l(d,{cols:"6",class:"text-right"},{default:s(()=>[a[5]||(a[5]=v("div",{class:"text-caption text-grey"},"Цена:",-1)),v("div",P,c(t.price)+" ₽ ",1)]),_:2},1024)]),_:2},1024),v("div",Q," Срок: "+c(t.time),1),l(J,{class:"justify-end"},{default:s(()=>[l(K,{color:"primary",variant:"elevated",rounded:"",onClick:m=>T(t.id)},{default:s(()=>a[6]||(a[6]=[g(" Подробнее ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)),V.value.length?$("",!0):(o(),w("p",W,"Заказы не найдены."))]),_:1})]),_:1})]),_:1}))}},ee=q(X,[["__scopeId","data-v-d4871658"]]);export{ee as default};
