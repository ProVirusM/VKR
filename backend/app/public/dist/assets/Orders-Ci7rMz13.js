import{r as o,b as L,d as m,w as g,e as C,o as p,f as s,g as l,V as d,h as x,i as V,c as j,j as N,F as O,k as T,l as U,m as h,n as y,t as r,p as q,q as A,a as c,s as F,u as E}from"./index-CUAanRwJ.js";const M={class:"text-subtitle-2 text-success"},R={class:"text-subtitle-2 text-error"},z={class:"text-caption text-right text-grey mt-2"},I={__name:"Orders",setup(G){const _=o([]),k=o([]),f=o([]),i=o(null),u=o(null),n=o(null),w=o([]);L(()=>{B(),v()});const B=async()=>{const e=await m.get("/api/directions");_.value=e.data};g(i,async e=>{e&&(await D(),u.value=null,n.value=null,f.value=[],v())});const D=async()=>{try{const e=await m.get(`/api/languages/${i.value}`),t=Array.from(new Set(e.data.map(a=>a.title))).map(a=>e.data.find(b=>b.title===a));k.value=t}catch(e){console.error("Ошибка при загрузке языков:",e)}};g(u,async e=>{e&&(await S(),n.value=null,v())});const S=async()=>{if(!u.value||!i.value)return;const e=await m.get(`/api/stacks/${u.value}/${i.value}`);f.value=e.data};g(n,()=>{v()});const v=async()=>{const e={};i.value&&(e.direction=i.value),u.value&&(e.language=u.value),n.value&&(e.stacks=n.value);try{const t=await m.get("/api/orders",{params:e});w.value=t.data}catch(t){console.error("Ошибка при фильтрации заказов:",t)}},$=e=>{console.log(`Перейти к деталям заказа: ${e}`)};return(e,t)=>(p(),C(T,{fluid:"",class:"py-10"},{default:s(()=>[l(V,null,{default:s(()=>[l(d,{cols:"12",sm:"4"},{default:s(()=>[l(x,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=a=>i.value=a),items:_.value,"item-text":"title","item-value":"id",label:"Выберите направление"},null,8,["modelValue","items"])]),_:1}),l(d,{cols:"12",sm:"4"},{default:s(()=>[l(x,{modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=a=>u.value=a),items:k.value,"item-text":"title","item-value":"id",label:"Выберите язык",disabled:!i.value},null,8,["modelValue","items","disabled"])]),_:1}),l(d,{cols:"12",sm:"4"},{default:s(()=>[l(x,{modelValue:n.value,"onUpdate:modelValue":t[2]||(t[2]=a=>n.value=a),items:f.value,"item-text":"title","item-value":"id",label:"Выберите технологию",disabled:!u.value},null,8,["modelValue","items","disabled"])]),_:1})]),_:1}),l(V,null,{default:s(()=>[(p(!0),j(O,null,N(w.value,a=>(p(),C(d,{key:a.id,cols:"12",sm:"6",md:"4"},{default:s(()=>[l(U,{class:"pa-6",elevation:"10",rounded:"xl"},{default:s(()=>[l(h,{class:"text-h5 text-primary"},{default:s(()=>[y(r(a.title),1)]),_:2},1024),l(q,{class:"text-body-1 text-grey-darken-2"},{default:s(()=>[y(r(a.text),1)]),_:2},1024),l(A,{class:"my-4"}),l(V,{justify:"space-between"},{default:s(()=>[l(d,{cols:"6"},{default:s(()=>[t[3]||(t[3]=c("div",{class:"text-caption text-grey"},"Статус:",-1)),c("div",M,r(a.status),1)]),_:2},1024),l(d,{cols:"6",class:"text-right"},{default:s(()=>[t[4]||(t[4]=c("div",{class:"text-caption text-grey"},"Цена:",-1)),c("div",R,r(a.price)+" ₽ ",1)]),_:2},1024)]),_:2},1024),c("div",z," Срок: "+r(a.time),1),l(F,{class:"justify-end"},{default:s(()=>[l(E,{color:"primary",variant:"elevated",rounded:"",onClick:b=>$(a.id)},{default:s(()=>t[5]||(t[5]=[y(" Подробнее ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}))}};export{I as default};
