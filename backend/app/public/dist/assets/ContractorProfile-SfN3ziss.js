import{N as I,O as A,P as D,Q as H,R as U,S as E,T as M,U as O,W as q,g as a,X as G,_ as J,r as N,b as K,e as b,f as e,m as L,d as Q,o as u,V as g,h as y,i as x,H as W,a as s,t as r,u as $,p as d,n as F,Y as R,K as h,q as S,c as p,k as C,F as w,z as X,J as Y,E as Z,C as j,I as ee,l as te,G as ae}from"./index-DQJToVhp.js";import{V as le}from"./VSnackbar-CAe27C-H.js";const se=I({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,...A(),...D(),...H(),...U()},"VTable"),oe=E()({name:"VTable",props:se(),setup(m,T){let{slots:i,emit:c}=T;const{themeClasses:v}=M(m),{densityClasses:P}=O(m);return q(()=>a(m.tag,{class:["v-table",{"v-table--fixed-height":!!m.height,"v-table--fixed-header":m.fixedHeader,"v-table--fixed-footer":m.fixedFooter,"v-table--has-top":!!i.top,"v-table--has-bottom":!!i.bottom,"v-table--hover":m.hover},v.value,P.value,m.class],style:m.style},{default:()=>{var k,V,f;return[(k=i.top)==null?void 0:k.call(i),i.default?a("div",{class:"v-table__wrapper",style:{height:G(m.height)}},[a("table",null,[i.default()])]):(V=i.wrapper)==null?void 0:V.call(i),(f=i.bottom)==null?void 0:f.call(i)]}})),{}}}),re={class:"text-h3 white--text"},ne={class:"text-grey-darken-1"},ie={class:"d-flex align-center mb-4"},ue=["href"],de={key:1,class:"text-grey"},ce={class:"d-flex align-center mb-4"},me=["onClick"],fe={key:1,class:"text-grey"},ve={class:"d-flex align-center mb-4"},be={class:"font-weight-bold mb-1"},pe={class:"text-grey text-caption mt-1"},_e={key:1,class:"text-grey"},ge={__name:"ContractorProfile",setup(m){const T=Y(),i=Z(),c=N(null),v=N({show:!1,text:"",color:"success"}),P=async()=>{try{const f=await Q.get(`/api/contractors/${T.params.id}/full-profile`);c.value=f.data}catch{v.value={show:!0,text:"Ошибка загрузки профиля",color:"error"}}},k=f=>{i.push(`/projects/${f}`)},V=f=>{i.push(`/contractor/orders/${f}`)};return K(P),(f,l)=>(u(),b(L,{class:"py-10"},{default:e(()=>[a(x,{justify:"center"},{default:e(()=>[a(g,{cols:"12",md:"10",lg:"8"},{default:e(()=>[a(y,{class:"profile-card mb-8",elevation:"8"},{default:e(()=>[a(x,{"no-gutters":"",align:"center"},{default:e(()=>[a(g,{cols:"auto",class:"d-flex flex-column align-center px-8 py-8 profile-avatar-col"},{default:e(()=>[a(W,{size:"110",color:"primary",class:"mb-4 elevation-6"},{default:e(()=>{var o,n,t;return[s("span",re,r(((t=(n=(o=c.value)==null?void 0:o.user)==null?void 0:n.name)==null?void 0:t.charAt(0))||"?"),1)]}),_:1}),a($,{color:"primary",class:"mt-2","prepend-icon":"mdi-account-badge"},{default:e(()=>l[3]||(l[3]=[d("Исполнитель")])),_:1})]),_:1}),a(g,null,{default:e(()=>[a(F,{class:"text-h4 font-weight-bold mb-2"},{default:e(()=>{var o,n,t,_,B,z;return[d(r((n=(o=c.value)==null?void 0:o.user)==null?void 0:n.surname)+" "+r((_=(t=c.value)==null?void 0:t.user)==null?void 0:_.name)+" "+r((z=(B=c.value)==null?void 0:B.user)==null?void 0:z.patronymic),1)]}),_:1}),a(R,{class:"mb-2"},{default:e(()=>{var o,n;return[a(h,{size:"20",color:"grey-darken-1",class:"mr-1"},{default:e(()=>l[4]||(l[4]=[d("mdi-email")])),_:1}),s("span",ne,r((n=(o=c.value)==null?void 0:o.user)==null?void 0:n.email),1)]}),_:1}),a(S,{class:"text-body-1 mt-2"},{default:e(()=>{var o;return[d(r(((o=c.value)==null?void 0:o.description)||"Нет описания"),1)]}),_:1})]),_:1})]),_:1})]),_:1}),a(y,{class:"mb-8 pa-6",elevation:"4"},{default:e(()=>{var o,n;return[s("div",ie,[a(h,{color:"indigo",class:"mr-2"},{default:e(()=>l[5]||(l[5]=[d("mdi-github")])),_:1}),l[6]||(l[6]=s("h3",{class:"text-h5 font-weight-bold mb-0"},"Проекты",-1))]),(n=(o=c.value)==null?void 0:o.projects)!=null&&n.length?(u(),b(x,{key:0,class:"project-list"},{default:e(()=>[(u(!0),p(w,null,C(c.value.projects,t=>(u(),b(g,{key:t.id,cols:"12",md:"6"},{default:e(()=>[a(y,{class:"mb-4 project-card",elevation:"2",onClick:_=>k(t.id),style:{cursor:"pointer"}},{default:e(()=>[a(F,{class:"font-weight-bold text-primary"},{default:e(()=>[d(r(t.name),1)]),_:2},1024),a(R,null,{default:e(()=>[a(h,{size:"18",color:"grey-darken-1",class:"mr-1"},{default:e(()=>l[7]||(l[7]=[d("mdi-link-variant")])),_:1}),s("a",{href:t.repository,target:"_blank",onClick:l[0]||(l[0]=j(()=>{},["stop"]))},r(t.repository),9,ue)]),_:2},1024),a(S,null,{default:e(()=>[d(r(t.text),1)]),_:2},1024),t.photos&&t.photos.length?(u(),b(x,{key:0,class:"mt-2"},{default:e(()=>[(u(!0),p(w,null,C(t.photos,_=>(u(),b(g,{key:_.id,cols:"6"},{default:e(()=>[a(ee,{src:_.link,"aspect-ratio":"1",class:"rounded-lg",cover:""},null,8,["src"])]),_:2},1024))),128))]),_:2},1024)):te("",!0)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})):(u(),p("div",de,"Нет проектов"))]}),_:1}),a(y,{class:"mb-8 pa-6",elevation:"4"},{default:e(()=>{var o,n;return[s("div",ce,[a(h,{color:"teal-darken-2",class:"mr-2"},{default:e(()=>l[8]||(l[8]=[d("mdi-briefcase-outline")])),_:1}),l[9]||(l[9]=s("h3",{class:"text-h5 font-weight-bold mb-0"},"Заказы",-1))]),(n=(o=c.value)==null?void 0:o.orders)!=null&&n.length?(u(),b(oe,{key:0,class:"orders-table"},{default:e(()=>[l[10]||(l[10]=s("thead",null,[s("tr",null,[s("th",null,"Название"),s("th",null,"Статус"),s("th",null,"Цена"),s("th",null,"Срок"),s("th",null,"Статус участия")])],-1)),s("tbody",null,[(u(!0),p(w,null,C(c.value.orders,t=>(u(),p("tr",{key:t.id,onClick:_=>V(t.id),style:{cursor:"pointer"}},[s("td",null,r(t.title),1),s("td",null,[a($,{color:t.status==="Завершен"?"success":t.status==="В работе"?"primary":"grey",size:"small"},{default:e(()=>[d(r(t.status),1)]),_:2},1032,["color"])]),s("td",null,r(t.price),1),s("td",null,r(t.time),1),s("td",null,r(t.order_contractor_status),1)],8,me))),128))])]),_:1})):(u(),p("div",fe,"Нет заказов"))]}),_:1}),a(y,{class:"pa-6",elevation:"4"},{default:e(()=>{var o,n;return[s("div",ve,[a(h,{color:"amber-darken-2",class:"mr-2"},{default:e(()=>l[11]||(l[11]=[d("mdi-star-outline")])),_:1}),l[12]||(l[12]=s("h3",{class:"text-h5 font-weight-bold mb-0"},"Отзывы",-1))]),(n=(o=c.value)==null?void 0:o.feedbacks)!=null&&n.length?(u(),b(x,{key:0},{default:e(()=>[(u(!0),p(w,null,C(c.value.feedbacks,t=>(u(),b(g,{key:t.id,cols:"12"},{default:e(()=>[a(ae,{type:t.estimation>=4?"success":t.estimation>=3?"warning":"error",class:"mb-2"},{default:e(()=>[s("div",be,[a(h,{left:"",size:"18",color:"amber"},{default:e(()=>l[13]||(l[13]=[d("mdi-star")])),_:1}),d(" Оценка: "+r(t.estimation),1)]),s("div",null,r(t.text),1),s("div",pe,r(t.timestamp),1)]),_:2},1032,["type"])]),_:2},1024))),128))]),_:1})):(u(),p("div",_e,"Нет отзывов"))]}),_:1})]),_:1})]),_:1}),a(le,{modelValue:v.value.show,"onUpdate:modelValue":l[2]||(l[2]=o=>v.value.show=o),color:v.value.color,timeout:3e3},{actions:e(()=>[a(X,{variant:"text",onClick:l[1]||(l[1]=o=>v.value.show=!1)},{default:e(()=>l[14]||(l[14]=[d("Закрыть")])),_:1})]),default:e(()=>[d(r(v.value.text)+" ",1)]),_:1},8,["modelValue","color"])]),_:1}))}},xe=J(ge,[["__scopeId","data-v-9a721639"]]);export{xe as default};
